name: Offline Mode - Digital Input
version: 1
author: Brent Rubell for Adafruit Industries

steps:
  - wait-serial: '[SD] Waiting for incoming JSON string...'
  - write-serial: '{"checksum":183,"components":[{"componentAPI":"digitalio","direction":"INPUT","isPin":true,"mode":"DIGITAL","name":"Button (D4)","period":5,"pinName":"D4","pull":"UP","sampleMode":"TIMER","type":"push_button"}],"exportVersion":"1.0.0","exportedAt":"2024-10-28T18:58:23.976Z","exportedBy":"wokwi","exportedFromDevice":{"board":"metroesp32s3","firmwareVersion":"1.0.0-beta.93","referenceVoltage":2.6,"totalAnalogPins":6,"totalGPIOPins":11}}'
  - write-serial: '\n'
  - wait-serial: '[SD] JSON string received!'
  - wait-serial: '[digitalio] Added new pin:'
  - wait-serial: 'Pin Name: 4'
  - wait-serial: 'Period: 5000'
  - wait-serial: 'Sample Mode: 1'
  - wait-serial: 'Direction: 2'
  - wait-serial: '{"timestamp":0,"pin":"D4","value":true,"si_unit":"raw value"}'
  - set-control:
      part-id: btn1
      control: pressed
      value: 1
  - wait-serial: '{"timestamp":0,"pin":"D4","value":false,"si_unit":"raw value"}'